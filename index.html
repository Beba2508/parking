<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parking Management</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background: linear-gradient(to right, #ffafbd, #ffc3a0); color: black; padding: 20px; }
        
        table { width: 80%; margin: auto; border-collapse: collapse; background: #ff9a9e; border-radius: 8px; overflow: hidden; }
        
        th, td { padding: 10px; border: 1px solid white; text-align: center; }
        
        th { background: #ff6f61; color: white; }
        
        .paid { background: #2ecc71; color: white; cursor: pointer; }
        
        .unpaid { background: #e74c3c; color: white; cursor: pointer; }
        
        button { background: #ff4081; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; transition: 0.3s ease-in-out; }
        
        button:hover { background: #ff1744; }
    </style>
</head>
<body>

    <h1>ðŸš— Parking Management</h1>

    <label for="parkingSelect">Odaberi parking lokaciju:</label>
    <select id="parkingSelect">
        <option value="ZAGREB">ZAGREB</option>
        <option value="CRA">CRA</option>
        <option value="BLUBINI">BLUBINI</option>
    </select>
    
    <button onclick="loadParking()">PrikaÅ¾i zauzetost</button>

    <h2>ZauzeÄ‡e parkinga</h2>
    <table id="parkingTable">
        <thead>
            <tr>
                <th>Mjesto</th>
                <th>Ime gosta</th>
                <th>Apartman</th>
                <th>Registarska oznaka</th>
                <th>Dolazak</th>
                <th>Odlazak</th>
                <th>PlaÄ‡eno</th>
                <th>Akcija</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Dodaj novu rezervaciju</h2>
    <input type="text" id="guestName" placeholder="Ime gosta">
    <input type="text" id="apartment" placeholder="Apartman">
    <input type="text" id="carPlate" placeholder="Registarska oznaka">
    <input type="date" id="arrivalDate">
    <input type="date" id="departureDate">
    <select id="paymentStatus">
        <option value="Ne">NeplaÄ‡eno</option>
        <option value="Da">PlaÄ‡eno</option>
    </select>
    <button onclick="addReservation()">Dodaj</button>

    <script>
        let parkingData = {
            ZAGREB: [],
            CRA: [],
            BLUBINI: []
        };

        function loadParking() {
            const location = document.getElementById("parkingSelect").value;
            const tableBody = document.getElementById("parkingTable").querySelector("tbody");
            tableBody.innerHTML = "";

            parkingData[location].forEach((entry, index) => {
                let tr = document.createElement("tr");

                Object.keys(entry).forEach(key => {
                    let td = document.createElement("td");
                    td.innerText = entry[key];

                    // Ako je status plaÄ‡anja, omoguÄ‡ujemo klik za promjenu
                    if (key === "PlaÄ‡eno") {
                        td.className = entry[key] === "Da" ? "paid" : "unpaid";
                        td.onclick = () => togglePaymentStatus(location, index, td);
                    }

                    tr.appendChild(td);
                });

                // Dodaj gumb za brisanje rezervacije
                let actionTd = document.createElement("td");
                let deleteBtn = document.createElement("button");
                deleteBtn.innerText = "Oslobodi";
                deleteBtn.onclick = () => removeReservation(location, index);
                actionTd.appendChild(deleteBtn);
                tr.appendChild(actionTd);

                tableBody.appendChild(tr);
            });
        }

        function addReservation() {
            const location = document.getElementById("parkingSelect").value;
            const guestName = document.getElementById("guestName").value;
            const apartment = document.getElementById("apartment").value;
            const carPlate = document.getElementById("carPlate").value;
            const arrivalDate = document.getElementById("arrivalDate").value;
            const departureDate = document.getElementById("departureDate").value;
            const paymentStatus = document.getElementById("paymentStatus").value;

            if (!guestName || !apartment || !carPlate || !arrivalDate || !departureDate) {
                alert("Molimo unesite sve podatke.");
                return;
            }

            parkingData[location].push({
                Mjesto: parkingData[location].length + 1,
                Ime: guestName,
                Apartman: apartment,
                Registracija: carPlate,
                Dolazak: arrivalDate,
                Odlazak: departureDate,
                PlaÄ‡eno: paymentStatus
            });

            loadParking();
        }

        function removeReservation(location, index) {
            parkingData[location].splice(index, 1);
            loadParking();
        }

        function togglePaymentStatus(location, index, td) {
            let currentStatus = parkingData[location][index].PlaÄ‡eno;
            parkingData[location][index].PlaÄ‡eno = currentStatus === "Da" ? "Ne" : "Da";
            td.innerText = parkingData[location][index].PlaÄ‡eno;
            td.className = parkingData[location][index].PlaÄ‡eno === "Da" ? "paid" : "unpaid";
        }
    </script>

</body>
</html>
